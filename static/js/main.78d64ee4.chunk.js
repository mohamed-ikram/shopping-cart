(this["webpackJsonpshopping-cart"]=this["webpackJsonpshopping-cart"]||[]).push([[0],{37:function(t,e,c){},38:function(t,e,c){},57:function(t,e,c){},62:function(t,e,c){},63:function(t,e,c){"use strict";c.r(e);var a=c(0),n=c(2),s=c.n(n),i=c(26),r=c.n(i),o=(c(37),c(38),c(4)),l=c(7),u=c(16),d=c(8),j=c.n(d),b=c(11),h=c(15),O=c(27),m=c(28),f=c(31),p=c(30),x=c(29),v=c.n(x),y=(c(57),c(6)),g=c(12);c(62);var C=function(t){return Object(a.jsxs)(n.Fragment,{children:[Object(a.jsx)("div",{className:"backDrop",onClick:function(){return t.modalClose()}}),Object(a.jsx)("div",{className:"modal",style:{transform:t.modal?"translateY(0)":"translateY(-100vh)",opacity:t.modal?"1":"0"},children:t.children})]})};var N=function(t){return Object(a.jsx)("button",{onClick:function(){return t.action()},className:"normalButton",children:t.title})},T=function(t){var e=Object(n.useState)([]),c=Object(o.a)(e,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){!function(){var e=Object.entries(t.localQuantity).filter((function(t){var e=Object(o.a)(t,2),c=e[0];if(e[1]>0)return c})).map((function(t){return t[0]})),c=t.products.filter((function(t,c){if(e.find((function(e){return e===Object.keys(t).toString()})))return t}));i(c)}()}),[t.localQuantity,t.products]),Object(a.jsx)("div",{children:t.backDrop?Object(a.jsxs)(C,{modalClose:function(){},modal:t.modal,children:[Object(a.jsxs)("div",{className:"transactionContainer",children:[Object(a.jsx)(g.a,{icon:y.a,color:"green"}),Object(a.jsx)("i",{style:{paddingLeft:"10px"},children:"Your Transaction is Completed"})]}),Object(a.jsx)("div",{style:{height:"200px",overflow:"auto"},children:Object(a.jsxs)("table",{className:"checkoutTable",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{className:"tableContent",children:[Object(a.jsx)("td",{className:"item",children:"Item"}),Object(a.jsx)("td",{children:"Quantity"}),Object(a.jsx)("td",{children:"Subtotal"})]})}),Object(a.jsxs)("tbody",{children:[s.map((function(t){return Object.entries(t).map((function(t){var e=Object(o.a)(t,2),c=e[0],n=e[1];return Object(a.jsxs)("tr",{className:"tableContent",children:[Object(a.jsx)("td",{className:"item",children:n.name}),Object(a.jsx)("td",{children:n.quantity}),Object(a.jsx)("td",{children:n.itemTotal})]},c)}))})),Object(a.jsxs)("tr",{className:"tableContent",children:[Object(a.jsx)("td",{}),Object(a.jsx)("td",{children:Object(a.jsx)("i",{children:Object(a.jsx)("b",{children:"Total"})})}),Object(a.jsx)("td",{children:t.total})]})]})]})}),Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"4px"},children:Object(a.jsx)(N,{title:"Continue Shopping",action:t.modalClose})})]}):null})},k=s.a.memo(T),Q=function(t){return Object(a.jsx)("button",{onClick:function(){return t.action()},className:"iconBtn",children:Object(a.jsx)(g.a,{icon:t.iconName})})},P=s.a.memo(Q),S=function(t){return Object(a.jsx)("div",{className:"floatingBottomContainer customWidth",children:Object(a.jsxs)("div",{className:"floatingBottom",children:[Object(a.jsxs)("div",{className:"bottomTextContainer",children:[Object(a.jsx)("p",{children:"Qty ".concat(t.quantity)}),Object(a.jsx)("p",{children:"Total ".concat(t.total)})]}),Object(a.jsx)("div",{className:"checkOutContainer",children:Object(a.jsx)(N,{title:"checkout",action:t.action})})]})})},q=function(t){return Object(a.jsxs)("div",{className:"imgContainer",children:[Object(a.jsx)("img",{src:t.imgUrl,width:"100",height:"100",alt:t.name}),Object(a.jsx)("p",{children:"".concat(t.offer,"% OFF")})]})},D=function(t){Object(f.a)(c,t);var e=Object(p.a)(c);function c(){var t;return Object(O.a)(this,c),(t=e.call(this)).fetchProducts=Object(h.a)(j.a.mark((function e(){var c,a,n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("https://shopping-cart-405ea-default-rtdb.firebaseio.com/products.json");case 3:for(n in c=e.sent,a=[],c.data)a.push(Object(b.a)({},n,c.data[n]));t.setState({products:a}),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),s=e.t0.toString().replace(/Error: /g,""),t.setState({errorMessage:s}),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,9]])}))),t.addTotal=function(e,c){var a=Object.values(t.state.localQuantity).reduce((function(t,e){return t+e})),n=Object.values(t.state.localTotal).reduce((function(t,e){return t+e}));t.setState({quantity:a,total:n})},t.addPrice=function(e,c){var a=Object(u.a)(t.state.products);a[c][e].quantity=a[c][e].quantity+1,a[c][e].itemTotal=a[c][e].itemTotal+a[c][e].discountPrice;var n=Object(l.a)({},t.state.localQuantity);void 0===n[e]?n[e]=1:n[e]=t.state.localQuantity[e]+1;var s=Object(l.a)({},t.state.localTotal);void 0===s[e]?s[e]=a[c][e].discountPrice:s[e]=t.state.localTotal[e]+a[c][e].discountPrice,t.setState({localQuantity:n,localTotal:s,products:a},(function(){return t.addTotal(e,c)}))},t.reduceTotal=function(){var e=Object.values(t.state.localQuantity).reduce((function(t,e){return t+e})),c=Object.values(t.state.localTotal).reduce((function(t,e){return t+e}));t.setState({quantity:e,total:c})},t.reducePrice=function(e,c){var a=Object.values(t.state.localQuantity).reduce((function(t,e){return t+e}));if(a>0&&t.state.localQuantity[e]>0){var n=Object(u.a)(t.state.products);n[c][e].quantity=n[c][e].quantity-1,n[c][e].itemTotal=n[c][e].itemTotal-n[c][e].discountPrice;var s=Object(l.a)({},t.state.localQuantity);s[e]=t.state.localQuantity[e]-1;var i=Object(l.a)({},t.state.localTotal);i[e]=t.state.localTotal[e]-n[c][e].discountPrice,t.setState({localQuantity:s,localTotal:i,products:n},(function(){return t.reduceTotal()}))}else 0===a?alert("Your cart is empty"):alert("You need to add this item")},t.checkout=function(){Object.values(t.state.localQuantity).reduce((function(t,e){return t+e}))<=0?alert("Your cart is empty"):t.setState({backDrop:!0,modal:!0})},t.modalClose=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchProducts();case 2:t.setState({modal:!1,quantity:0,localQuantity:{},total:0,localTotal:{}}),setTimeout((function(){t.setState({backDrop:!1})}),500);case 4:case"end":return e.stop()}}),e)}))),t.state={products:[],quantity:0,localQuantity:{},total:0,localTotal:{},modal:!1,backDrop:!1,checkoutData:null,errorMessage:null},t}return Object(m.a)(c,[{key:"componentDidMount",value:function(){this.fetchProducts()}},{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{children:[this.state.backDrop?Object(a.jsx)(k,{backDrop:this.state.backDrop,modalClose:this.modalClose,modal:this.state.modal,products:this.state.products,localQuantity:this.state.localQuantity,total:this.state.total}):null,Object(a.jsxs)("div",{className:"productContainer",children:[Object(a.jsx)("h2",{children:"Groceries"}),Object(a.jsxs)("div",{className:"cardView customWidth",children:[this.state.products.length>0?this.state.products.map((function(e,c){return Object.entries(e).map((function(e){var n=Object(o.a)(e,2),s=n[0],i=n[1];return Object(a.jsxs)("div",{className:"product",children:[Object(a.jsx)(q,{imgUrl:i.imgUrl,name:i.name,offer:i.offer}),Object(a.jsxs)("div",{className:"productContentContainer",children:[Object(a.jsx)("p",{className:"name",children:i.name}),Object(a.jsx)("p",{className:"description",children:i.description}),Object(a.jsx)("p",{className:"description",children:i.type}),Object(a.jsxs)("p",{className:"description",children:["MRP ",i.price]}),Object(a.jsxs)("p",{className:"discountPrice",children:["Rs ",i.discountPrice]}),Object(a.jsxs)("div",{className:"buttonContainer",children:[Object(a.jsx)(N,{title:"add cart",action:function(){return t.addPrice(s,c)}}),Object(a.jsxs)("div",{className:"iconConatiner",children:[Object(a.jsx)(P,{iconName:y.b,action:function(){return t.reducePrice(s,c)}}),Object(a.jsx)("p",{style:{padding:"0px 10px"},children:t.state.localQuantity[s]?t.state.localQuantity[s]:0}),Object(a.jsx)(P,{iconName:y.c,action:function(){return t.addPrice(s,c)}})]})]})]})]},s)}))})):Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(a.jsx)("p",{children:this.state.errorMessage?this.state.errorMessage:"Please Wait..."})}),this.state.errorMessage?null:Object(a.jsx)(S,{quantity:this.state.quantity,total:this.state.total,action:this.checkout})]})]})]})}}]),c}(n.Component);var w=function(){return Object(a.jsx)(D,{})},M=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,64)).then((function(e){var c=e.getCLS,a=e.getFID,n=e.getFCP,s=e.getLCP,i=e.getTTFB;c(t),a(t),n(t),s(t),i(t)}))};r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(w,{})}),document.getElementById("root")),M()}},[[63,1,2]]]);
//# sourceMappingURL=main.78d64ee4.chunk.js.map